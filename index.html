<!DOCTYPE html>
<html lang="en-us">
  <head>
    <meta charset="UTF-8">
    <title>Coding-webhook-handler by spacelan</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" type="text/css" href="stylesheets/normalize.css" media="screen">
    <link href='https://fonts.googleapis.com/css?family=Open+Sans:400,700' rel='stylesheet' type='text/css'>
    <link rel="stylesheet" type="text/css" href="stylesheets/stylesheet.css" media="screen">
    <link rel="stylesheet" type="text/css" href="stylesheets/github-light.css" media="screen">
  </head>
  <body>
    <section class="page-header">
      <h1 class="project-name">Coding-webhook-handler</h1>
      <h2 class="project-tagline">Node.js web handler / middleware for processing Coding Webhooks</h2>
      <a href="https://github.com/spacelan/coding-webhook-handler" class="btn">View on GitHub</a>
      <a href="https://github.com/spacelan/coding-webhook-handler/zipball/master" class="btn">Download .zip</a>
      <a href="https://github.com/spacelan/coding-webhook-handler/tarball/master" class="btn">Download .tar.gz</a>
    </section>

    <section class="main-content">
      <h1>
<a id="coding-webhook-handler" class="anchor" href="#coding-webhook-handler" aria-hidden="true"><span class="octicon octicon-link"></span></a>coding-webhook-handler</h1>

<p><a href="https://travis-ci.org/spacelan/coding-webhook-handler"><img src="https://travis-ci.org/spacelan/coding-webhook-handler.svg?branch=master" alt="Build Status"></a></p>

<p>Coding allows you to register <strong><a href="https://coding.net/help/about_us?key=webhook">Webhooks</a></strong> for your repositories. Each time an event occurs on your repository, whether it be pushing code, filling issues or creating pull requests, the webhook address you register can be configured to be pinged with details.</p>

<p>This library is a fork of <a href="https://github.com/rvagg/github-webhook-handler">github-webhook-handler</a>. It is a small handler (or "middleware" if you must) for Node.js web servers that handles all the logic of receiving and verifying webhook requests from Coding.</p>

<h2>
<a id="install" class="anchor" href="#install" aria-hidden="true"><span class="octicon octicon-link"></span></a>Install</h2>

<p><code>npm install coding-webhook-handler</code></p>

<h2>
<a id="example" class="anchor" href="#example" aria-hidden="true"><span class="octicon octicon-link"></span></a>Example</h2>

<div class="highlight highlight-js"><pre><span class="pl-k">var</span> http <span class="pl-k">=</span> <span class="pl-c1">require</span>(<span class="pl-s"><span class="pl-pds">'</span>http<span class="pl-pds">'</span></span>)
<span class="pl-k">var</span> createHandler <span class="pl-k">=</span> <span class="pl-c1">require</span>(<span class="pl-s"><span class="pl-pds">'</span>coding-webhook-handler<span class="pl-pds">'</span></span>)
<span class="pl-k">var</span> handler <span class="pl-k">=</span> <span class="pl-c1">createHandler</span>({
  path<span class="pl-k">:</span> <span class="pl-s"><span class="pl-pds">'</span>/webhook<span class="pl-pds">'</span></span>,
  token<span class="pl-k">:</span> <span class="pl-s"><span class="pl-pds">'</span>mytoken<span class="pl-pds">'</span></span> <span class="pl-c">// maybe there is no token</span>
})

http.<span class="pl-c1">createServer</span>(<span class="pl-k">function</span>(<span class="pl-smi">req</span>, <span class="pl-smi">res</span>) {
  <span class="pl-c1">handler</span>(req, res, <span class="pl-k">function</span>(<span class="pl-smi">err</span>) {
    res.<span class="pl-c1">statusCode</span> <span class="pl-k">=</span> <span class="pl-c1">404</span>
    res.<span class="pl-c1">end</span>(<span class="pl-s"><span class="pl-pds">'</span>no such location<span class="pl-pds">'</span></span>)
  })
}).<span class="pl-c1">listen</span>(<span class="pl-c1">7777</span>)

handler.<span class="pl-c1">on</span>(<span class="pl-s"><span class="pl-pds">'</span>error<span class="pl-pds">'</span></span>, <span class="pl-k">function</span>(<span class="pl-smi">err</span>) {
  <span class="pl-en">console</span><span class="pl-c1">.error</span>(<span class="pl-s"><span class="pl-pds">'</span>Error:<span class="pl-pds">'</span></span>, err.<span class="pl-c1">message</span>)
})

handler.<span class="pl-c1">on</span>(<span class="pl-s"><span class="pl-pds">'</span>*<span class="pl-pds">'</span></span>, <span class="pl-k">function</span>(<span class="pl-smi">event</span>) {
  <span class="pl-en">console</span><span class="pl-c1">.log</span>(<span class="pl-c1">event</span>.<span class="pl-c1">event</span>)
  <span class="pl-en">console</span><span class="pl-c1">.log</span>(<span class="pl-c1">event</span>.<span class="pl-c1">payload</span>)
  <span class="pl-en">console</span><span class="pl-c1">.log</span>(<span class="pl-c1">event</span>.<span class="pl-c1">protocol</span>)
  <span class="pl-en">console</span><span class="pl-c1">.log</span>(<span class="pl-c1">event</span>.<span class="pl-c1">host</span>)
  <span class="pl-en">console</span><span class="pl-c1">.log</span>(<span class="pl-c1">event</span>.<span class="pl-c1">url</span>)
})

handler.<span class="pl-c1">on</span>(<span class="pl-s"><span class="pl-pds">'</span>push<span class="pl-pds">'</span></span>, <span class="pl-k">function</span>(<span class="pl-smi">event</span>) {
  <span class="pl-en">console</span><span class="pl-c1">.log</span>(<span class="pl-c1">event</span>)
})

handler.<span class="pl-c1">on</span>(<span class="pl-s"><span class="pl-pds">'</span>star<span class="pl-pds">'</span></span>, <span class="pl-k">function</span>(<span class="pl-smi">event</span>) {
  <span class="pl-en">console</span><span class="pl-c1">.log</span>(<span class="pl-c1">event</span>)
})</pre></div>

<h2>
<a id="license" class="anchor" href="#license" aria-hidden="true"><span class="octicon octicon-link"></span></a>License</h2>

<p>MIT</p>

      <footer class="site-footer">
        <span class="site-footer-owner"><a href="https://github.com/spacelan/coding-webhook-handler">Coding-webhook-handler</a> is maintained by <a href="https://github.com/spacelan">spacelan</a>.</span>

        <span class="site-footer-credits">This page was generated by <a href="https://pages.github.com">GitHub Pages</a> using the <a href="https://github.com/jasonlong/cayman-theme">Cayman theme</a> by <a href="https://twitter.com/jasonlong">Jason Long</a>.</span>
      </footer>

    </section>

  
  </body>
</html>
